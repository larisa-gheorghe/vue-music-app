(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupedChunk"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),o=n("da84"),a=n("c65b"),c=n("e330"),i=n("1626"),s=n("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=o.Error,l=c(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!i(t))return l(this,e);var n=a(t,this,e);if(null!==n&&!s(n))throw new d("RegExp exec method returned something other than an Object or null");return!!n}})},"04d1":function(e,t,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"25f0":function(e,t,n){"use strict";var r=n("e330"),o=n("5e77").PROPER,a=n("6eeb"),c=n("825a"),i=n("3a9b"),s=n("577e"),u=n("d039"),d=n("ad6d"),l="toString",b=RegExp.prototype,f=b[l],g=r(d),m=u((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),p=o&&f.name!=l;(m||p)&&a(RegExp.prototype,l,(function(){var e=c(this),t=s(e.source),n=e.flags,r=s(void 0===n&&i(b,e)&&!("flags"in b)?g(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"4df4":function(e,t,n){"use strict";var r=n("da84"),o=n("0366"),a=n("c65b"),c=n("7b0b"),i=n("9bdd"),s=n("e95a"),u=n("68ee"),d=n("07fa"),l=n("8418"),b=n("9a1f"),f=n("35a1"),g=r.Array;e.exports=function(e){var t=c(e),n=u(this),r=arguments.length,m=r>1?arguments[1]:void 0,p=void 0!==m;p&&(m=o(m,r>2?arguments[2]:void 0));var v,h,O,j,x,_,y=f(t),w=0;if(!y||this==g&&s(y))for(v=d(t),h=n?new this(v):g(v);v>w;w++)_=p?m(t[w],w):t[w],l(h,w,_);else for(j=b(t,y),x=j.next,h=n?new this:[];!(O=a(x,j)).done;w++)_=p?i(j,m,[O.value,w],!0):O.value,l(h,w,_);return h.length=w,h}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),o=n("e330"),a=n("59ed"),c=n("7b0b"),i=n("07fa"),s=n("577e"),u=n("d039"),d=n("addb"),l=n("a640"),b=n("04d1"),f=n("d998"),g=n("2d00"),m=n("512c"),p=[],v=o(p.sort),h=o(p.push),O=u((function(){p.sort(void 0)})),j=u((function(){p.sort(null)})),x=l("sort"),_=!u((function(){if(g)return g<70;if(!(b&&b>3)){if(f)return!0;if(m)return m<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)p.push({k:t+r,v:n})}for(p.sort((function(e,t){return t.v-e.v})),r=0;r<p.length;r++)t=p[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),y=O||!j||!x||!_,w=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}};r({target:"Array",proto:!0,forced:y},{sort:function(e){void 0!==e&&a(e);var t=c(this);if(_)return void 0===e?v(t):v(t,e);var n,r,o=[],s=i(t);for(r=0;r<s;r++)r in t&&h(o,t[r]);d(o,w(e)),n=o.length,r=0;while(r<n)t[r]=o[r++];while(r<s)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),o=n("1d80"),a=n("577e"),c=n("5899"),i=r("".replace),s="["+c+"]",u=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),l=function(e){return function(t){var n=a(o(t));return 1&e&&(n=i(n,u,"")),2&e&&(n=i(n,d,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},7156:function(e,t,n){var r=n("1626"),o=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var c,i;return a&&r(c=t.constructor)&&c!==n&&o(i=c.prototype)&&i!==n.prototype&&a(e,i),e}},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),o={class:"w-full mb-8 py-14 text-center text-white relative"},a=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(../assets/img/song-header.png)"}},null,-1),c={class:"container mx-auto flex items-center"},i={class:"z-50 text-left ml-8"},s={class:"text-3xl font-bold"},u={class:"song-price"},d={class:"container mx-auto mt-6",id:"comments"},l={class:"bg-white rounded border border-gray-200 relative flex flex-col"},b={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},f={class:"card-title"},g=Object(r["i"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),m={class:"p-6"},p=["disabled"],v=Object(r["i"])("option",{value:"1"},"Latest",-1),h=Object(r["i"])("option",{value:"2"},"Oldest",-1),O=[v,h],j={class:"container mx-auto"},x={class:"mb-5"},_={class:"font-bold"};function y(e,t,n,v,h,y){var w=Object(r["G"])("vee-field"),S=Object(r["G"])("ErrorMessage"),k=Object(r["G"])("vee-form");return Object(r["A"])(),Object(r["h"])("main",null,[Object(r["i"])("section",o,[a,Object(r["i"])("div",c,[Object(r["i"])("button",{type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none",onClick:t[0]||(t[0]=Object(r["U"])((function(t){return e.newSong(h.song)}),["prevent"]))},[Object(r["i"])("i",{class:Object(r["t"])(["fas",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)]),Object(r["i"])("div",i,[Object(r["i"])("div",s,Object(r["K"])(h.song.modified_name),1),Object(r["i"])("div",null,Object(r["K"])(h.song.genre),1),Object(r["i"])("div",u,Object(r["K"])(e.$n(1,"currency","ja")),1)])])]),Object(r["i"])("section",d,[Object(r["i"])("div",l,[Object(r["i"])("div",b,[Object(r["i"])("span",f,Object(r["K"])(e.$tc("song.comment_count",h.song.comment_count,{count:h.song.comment_count})),1),g]),Object(r["i"])("div",m,[h.comment_show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",h.comment_alert_variant])},Object(r["K"])(h.comment_alert_msg),3)):Object(r["g"])("",!0),e.userLoggedIn?(Object(r["A"])(),Object(r["f"])(k,{key:1,onSubmit:y.addComment,"validation-schema":h.schema},{default:Object(r["S"])((function(){return[Object(r["k"])(w,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["k"])(S,{class:"text-red-600 block",name:"comment"}),Object(r["i"])("button",{type:"submit",disabled:h.comment_in_submission,class:"py-1.5 px-3 rounded text-white bg-green-600 block"}," Submit ",8,p)]})),_:1},8,["onSubmit","validation-schema"])):Object(r["g"])("",!0),Object(r["T"])(Object(r["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.sort=e}),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},O,512),[[r["N"],h.sort]])])])]),Object(r["i"])("ul",j,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["F"])(y.sortedComments,(function(e){return Object(r["A"])(),Object(r["h"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docID},[Object(r["i"])("div",x,[Object(r["i"])("div",_,Object(r["K"])(e.name),1),Object(r["i"])("time",null,Object(r["K"])(e.datePosted),1)]),Object(r["i"])("p",null,Object(r["K"])(e.content),1)])})),128))])])}var w=n("1da1"),S=n("5530"),k=(n("96cf"),n("fb6a"),n("d3b7"),n("25f0"),n("159b"),n("5502")),A=n("b79f"),I={name:"Song",data:function(){return{song:{},schema:{comment:"required|min:3|max:100"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_msg:"Please wait! Your comment is being submitted.",comments:[],sort:"1"}},computed:Object(S["a"])(Object(S["a"])(Object(S["a"])({},Object(k["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn}})),Object(k["c"])(["playing"])),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.datePosted)-new Date(t.datePosted):new Date(t.datePosted)-new Date(n.datePosted)}))}}),beforeRouteEnter:function(e,t,n){return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["c"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){if(r.exists){var t=e.$route.query.sort;e.sort="1"===t||"2"===t?t:"1",e.song=r.data(),e.getComments()}else e.$router.push({name:"home"})}));case 4:case"end":return t.stop()}}),t)})))()},methods:Object(S["a"])(Object(S["a"])({},Object(k["b"])(["newSong"])),{},{addComment:function(e,t){var n=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.resetForm,n.comment_show_alert=!0,n.comment_in_submission=!0,n.comment_alert_variant="bg-blue-500",n.comment_alert_msg="Please wait! Your comment is being submitted.",a={content:e.comment,datePosted:(new Date).toString(),sid:n.$route.params.id,name:A["a"].currentUser.displayName,uid:A["a"].currentUser.uid},r.next=8,A["b"].add(a);case 8:return n.song.comment_count+=1,r.next=11,A["c"].doc(n.$route.params.id).update({comment_count:n.song.comment_count});case 11:n.getComments(),n.comment_in_submission=!1,n.comment_alert_variant="bg-green-500",n.comment_alert_msg="Comment added!",o();case 16:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A["b"].where("sid","==",e.$route.params.id).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){return[e.comments.push(Object(S["a"])({docID:t.id},t.data()))]}));case 5:case"end":return t.stop()}}),t)})))()}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}},E=n("d959"),U=n.n(E);const F=U()(I,[["render",y]]);t["default"]=F},"9bdd":function(e,t,n){var r=n("825a"),o=n("2a62");e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(c){o(e,"throw",c)}}},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),a=n("23cb"),c=n("5926"),i=n("07fa"),s=n("7b0b"),u=n("65f0"),d=n("8418"),l=n("1dde"),b=l("splice"),f=o.TypeError,g=Math.max,m=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var n,r,o,l,b,h,O=s(this),j=i(O),x=a(e,j),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=j-x):(n=_-2,r=m(g(c(t),0),j-x)),j+n-r>p)throw f(v);for(o=u(O,r),l=0;l<r;l++)b=x+l,b in O&&d(o,l,O[b]);if(o.length=r,n<r){for(l=x;l<j-r;l++)b=l+r,h=l+n,b in O?O[h]=O[b]:delete O[h];for(l=j;l>j-r+n;l--)delete O[l-1]}else if(n>r)for(l=j-r;l>x;l--)b=l+r-1,h=l+n-1,b in O?O[h]=O[b]:delete O[h];for(l=0;l<n;l++)O[l+x]=arguments[l+2];return O.length=j-r+n,o}})},a630:function(e,t,n){var r=n("23e7"),o=n("4df4"),a=n("1c7e"),c=!a((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:c},{from:o})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),o=n("da84"),a=n("e330"),c=n("94ca"),i=n("6eeb"),s=n("1a2d"),u=n("7156"),d=n("3a9b"),l=n("d9b5"),b=n("c04e"),f=n("d039"),g=n("241c").f,m=n("06cf").f,p=n("9bf2").f,v=n("408a"),h=n("58a8").trim,O="Number",j=o[O],x=j.prototype,_=o.TypeError,y=a("".slice),w=a("".charCodeAt),S=function(e){var t=b(e,"number");return"bigint"==typeof t?t:k(t)},k=function(e){var t,n,r,o,a,c,i,s,u=b(e,"number");if(l(u))throw _("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=h(u),t=w(u,0),43===t||45===t){if(n=w(u,2),88===n||120===n)return NaN}else if(48===t){switch(w(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=y(u,2),c=a.length,i=0;i<c;i++)if(s=w(a,i),s<48||s>o)return NaN;return parseInt(a,r)}return+u};if(c(O,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var A,I=function(e){var t=arguments.length<1?0:j(S(e)),n=this;return d(x,n)&&f((function(){v(n)}))?u(Object(t),n,I):t},E=r?g(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),U=0;E.length>U;U++)s(j,A=E[U])&&!s(I,A)&&p(I,A,m(j,A));I.prototype=x,x.constructor=I,i(o,O,I)}},addb:function(e,t,n){var r=n("f36a"),o=Math.floor,a=function(e,t){var n=e.length,s=o(n/2);return n<8?c(e,t):i(e,a(r(e,0,s),t),a(r(e,s),t),t)},c=function(e,t){var n,r,o=e.length,a=1;while(a<o){r=a,n=e[a];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},i=function(e,t,n,r){var o=t.length,a=n.length,c=0,i=0;while(c<o||i<a)e[c+i]=c<o&&i<a?r(t[c],n[i])<=0?t[c++]:n[i++]:c<o?t[c++]:n[i++];return e};e.exports=a},d28b:function(e,t,n){var r=n("746f");r("iterator")},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},e01a:function(e,t,n){"use strict";var r=n("23e7"),o=n("83ab"),a=n("da84"),c=n("e330"),i=n("1a2d"),s=n("1626"),u=n("3a9b"),d=n("577e"),l=n("9bf2").f,b=n("e893"),f=a.Symbol,g=f&&f.prototype;if(o&&s(f)&&(!("description"in g)||void 0!==f().description)){var m={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),t=u(g,this)?new f(e):void 0===e?f():f(e);return""===e&&(m[t]=!0),t};b(p,f),p.prototype=g,g.constructor=p;var v="Symbol(test)"==String(f("test")),h=c(g.toString),O=c(g.valueOf),j=/^Symbol\((.*)\)[^)]+$/,x=c("".replace),_=c("".slice);l(g,"description",{configurable:!0,get:function(){var e=O(this),t=h(e);if(i(m,e))return"";var n=v?_(t,7,-1):x(t,j,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},f74b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"container mx-auto mt-6"},a={class:"md:grid md:grid-cols-3 md:gap-4"},c={class:"col-span-1"},i={class:"col-span-2"},s={class:"bg-white rounded border border-gray-200 relative flex flex-col"},u={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},d={class:"card-title"},l=Object(r["i"])("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"},null,-1),b={class:"p-6"};function f(e,t,n,f,g,m){var p=Object(r["G"])("app-upload"),v=Object(r["G"])("composition-item");return Object(r["A"])(),Object(r["h"])("section",o,[Object(r["i"])("div",a,[Object(r["i"])("div",c,[Object(r["k"])(p,{ref:"upload",addSong:m.addSong},null,8,["addSong"])]),Object(r["i"])("div",i,[Object(r["i"])("div",s,[Object(r["i"])("div",u,[Object(r["i"])("span",d,Object(r["K"])(e.$t("manage.my_songs")),1),l]),Object(r["i"])("div",b,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["F"])(g.songs,(function(e,t){return Object(r["A"])(),Object(r["f"])(v,{key:e.docID,song:e,updateSong:m.updateSong,index:t,removeSong:m.removeSong,updateUnsavedFlag:m.updateUnsavedFlag},null,8,["song","updateSong","index","removeSong","updateUnsavedFlag"])})),128))])])])])])}var g=n("5530"),m=n("1da1"),p=(n("96cf"),n("d3b7"),n("159b"),n("a434"),n("b0c0"),{class:"bg-white rounded border border-gray-200 relative flex flex-col"}),v={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},h={class:"card-title"},O=Object(r["i"])("i",{class:"fas fa-upload float-right text-green-400 text-2xl"},null,-1),j={class:"p-6"},x=Object(r["i"])("hr",{class:"my-6"},null,-1),_={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function y(e,t,n,o,a,c){return Object(r["A"])(),Object(r["h"])("div",p,[Object(r["i"])("div",v,[Object(r["i"])("span",h,Object(r["K"])(e.$t("upload.title")),1),O]),Object(r["i"])("div",j,[Object(r["i"])("div",{class:Object(r["t"])(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":a.is_dragover}]),onDrag:t[0]||(t[0]=Object(r["U"])((function(){}),["prevent","stop"])),onDragstart:t[1]||(t[1]=Object(r["U"])((function(){}),["prevent","stop"])),onDragend:t[2]||(t[2]=Object(r["U"])((function(e){return a.is_dragover=!1}),["prevent","stop"])),onDragover:t[3]||(t[3]=Object(r["U"])((function(e){return a.is_dragover=!0}),["prevent","stop"])),onDragenter:t[4]||(t[4]=Object(r["U"])((function(e){return a.is_dragover=!0}),["prevent","stop"])),onDragleave:t[5]||(t[5]=Object(r["U"])((function(e){return a.is_dragover=!1}),["prevent","stop"])),onDrop:t[6]||(t[6]=Object(r["U"])((function(e){return c.upload(e)}),["prevent","stop"]))},[Object(r["i"])("h5",null,Object(r["K"])(e.$t("upload.dropbox")),1)],34),Object(r["i"])("input",{type:"file",multiple:"",onChange:t[7]||(t[7]=function(e){return c.upload(e)})},null,32),x,(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["F"])(a.uploads,(function(e){return Object(r["A"])(),Object(r["h"])("div",{class:"mb-4",key:e.name},[Object(r["i"])("div",{class:Object(r["t"])(["font-bold text-sm",e.text_class])},[Object(r["i"])("i",{class:Object(r["t"])(e.icon)},null,2),Object(r["j"])(" "+Object(r["K"])(e.name),1)],2),Object(r["i"])("div",_,[Object(r["i"])("div",{class:Object(r["t"])(["transition-all progress-bar",e.variant]),style:Object(r["u"])({width:e.current_progress+"%"})},null,6)])])})),128))])])}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){if(Array.isArray(e))return w(e)}n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function k(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("ac1f"),n("00b4");function A(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){return S(e)||k(e)||A(e)||I()}var U=n("b79f"),F={name:"Upload",data:function(){return{is_dragover:!1,uploads:[]}},props:["addSong"],methods:{upload:function(e){var t=this;this.is_dragover=!1;var n=e.dataTransfer?E(e.dataTransfer.files):E(e.target.files);n.forEach((function(e){if("audio/mpeg"===e.type)if(navigator.onLine){var n=U["d"].ref(),r=n.child("songs/".concat(e.name)),o=r.put(e),a=t.uploads.push({task:o,current_progress:0,name:e.name,variant:"bg-blue-400",icon:"fas fa-spinner fa-spin",text_class:""})-1;o.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t.uploads[a].current_progress=n}),(function(){t.uploads[a].variant="bg-red-400",t.uploads[a].icon="fas fa-times",t.uploads[a].text_class="text-red-400"}),Object(m["a"])(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={uid:U["a"].currentUser.uid,display_name:U["a"].currentUser.displayName,original_name:o.snapshot.ref.name,modified_name:o.snapshot.ref.name,genre:"",comment_count:0},e.next=3,o.snapshot.ref.getDownloadURL();case 3:return n.url=e.sent,e.next=6,U["c"].add(n);case 6:return r=e.sent,e.next=9,r.get();case 9:c=e.sent,t.addSong(c),t.uploads[a].variant="bg-green-400",t.uploads[a].icon="fas fa-check",t.uploads[a].text_class="text-green-400";case 14:case"end":return e.stop()}}),e)}))))}else t.uploads.push({task:{},current_progress:100,name:e.name,variant:"bg-red-400",icon:"fas fa-times",text_class:"text-red-400"})}))},cancelUploads:function(){this.uploads.forEach((function(e){e.task.cancel()}))}},beforeUnmount:function(){this.uploads.forEach((function(e){e.task.cancel()}))}},R=n("d959"),N=n.n(R);const C=N()(F,[["render",y]]);var D=C,T={class:"border border-gray-200 p-3 mb-4 rounded"},K={class:"inline-block text-2xl font-bold"},$=Object(r["i"])("i",{class:"fa fa-times"},null,-1),G=[$],P=Object(r["i"])("i",{class:"fa fa-pencil-alt"},null,-1),M=[P],L={class:"mb-3"},q=Object(r["i"])("label",{class:"inline-block mb-2"},"Song Title",-1),Y={class:"mb-3"},V=Object(r["i"])("label",{class:"inline-block mb-2"},"Genre",-1),B=["disabled"],J=["disabled"];function z(e,t,n,o,a,c){var i=Object(r["G"])("vee-field"),s=Object(r["G"])("ErrorMessage"),u=Object(r["G"])("vee-form");return Object(r["A"])(),Object(r["h"])("div",T,[Object(r["T"])(Object(r["i"])("div",null,[Object(r["i"])("h4",K,Object(r["K"])(n.song.modified_name),1),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right",onClick:t[0]||(t[0]=Object(r["U"])((function(){return c.deleteSong&&c.deleteSong.apply(c,arguments)}),["prevent"]))},G),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right",onClick:t[1]||(t[1]=Object(r["U"])((function(e){return a.showForm=!a.showForm}),["prevent"]))},M)],512),[[r["O"],!a.showForm]]),Object(r["T"])(Object(r["i"])("div",null,[a.song_show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",a.song_alert_variant])},Object(r["K"])(a.song_alert_msg),3)):Object(r["g"])("",!0),Object(r["k"])(u,{"validation-schema":a.songSchema,"initial-values":n.song,onSubmit:c.editSong},{default:Object(r["S"])((function(){return[Object(r["i"])("div",L,[q,Object(r["k"])(i,{type:"text",name:"modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Song Title",onInput:t[2]||(t[2]=function(e){return n.updateUnsavedFlag(!0)})}),Object(r["k"])(s,{class:"text-red-600",name:"modified_name"})]),Object(r["i"])("div",Y,[V,Object(r["k"])(i,{type:"text",name:"genre",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Genre",onInput:t[3]||(t[3]=function(e){return n.updateUnsavedFlag(!0)})}),Object(r["k"])(s,{class:"text-red-600",name:"genre"})]),Object(r["i"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600",disabled:a.song_in_submission}," Submit ",8,B),Object(r["i"])("button",{type:"button",class:"py-1.5 px-3 rounded text-white bg-gray-600",disabled:a.song_in_submission,onClick:t[4]||(t[4]=Object(r["U"])((function(e){return a.showForm=!1}),["prevent"]))}," Go Back ",8,J)]})),_:1},8,["validation-schema","initial-values","onSubmit"])],512),[[r["O"],a.showForm]])])}n("a9e3");var X={name:"CompositionItem",props:{song:{type:Object,required:!0},updateSong:{type:Function,required:!0},index:{type:Number,required:!0},removeSong:{type:Function,required:!0},updateUnsavedFlag:{type:Function}},data:function(){return{showForm:!1,songSchema:{modified_name:"required",genre:"alpha_spaces"},song_in_submission:!1,song_show_alert:!1,song_alert_variant:"bg-blue-500",song_alert_msg:"Please wait! Updating song info."}},methods:{editSong:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.song_show_alert=!0,t.song_in_submission=!0,t.song_alert_variant="bg-blue-500",t.song_alert_msg="Please wait! Updating song info.",n.prev=4,n.next=7,U["c"].doc(t.song.docID).update(e);case 7:n.next=15;break;case 9:return n.prev=9,n.t0=n["catch"](4),t.song_in_submission=!1,t.song_alert_variant="bg-red-500",t.song_alert_msg="Something went wrong! Try again later",n.abrupt("return");case 15:t.updateSong(t.index,e),t.updateUnsavedFlag(!1),t.song_in_submission=!1,t.song_alert_variant="bg-green-500",t.song_alert_msg="Success!";case 20:case"end":return n.stop()}}),n,null,[[4,9]])})))()},deleteSong:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=U["d"].ref(),r=n.child("songs/".concat(e.song.original_name)),t.next=4,r.delete();case 4:return t.next=6,U["c"].doc(e.song.docID).delete();case 6:e.removeSong(e.index);case 7:case"end":return t.stop()}}),t)})))()}}};const H=N()(X,[["render",z]]);var W=H,Q={name:"manage",components:{AppUpload:D,CompositionItem:W},data:function(){return{songs:[],unsavedFlag:!1}},created:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U["c"].where("uid","==",U["a"].currentUser.uid).get();case 2:n=t.sent,n.forEach(e.addSong);case 4:case"end":return t.stop()}}),t)})))()},methods:{updateSong:function(e,t){this.songs[e].modified_name=t.modified_name,this.songs[e].genre=t.genre},removeSong:function(e){this.songs.splice(e,1)},addSong:function(e){var t=Object(g["a"])(Object(g["a"])({},e.data()),{},{docID:e.id});this.songs.push(t)},updateUnsavedFlag:function(e){this.unsavedFlag=e}},beforeRouteLeave:function(e,t,n){if(this.unsavedFlag){var r=confirm("You have unsaved changes. Are you sure you want to leave?");n(r)}else n()}};const Z=N()(Q,[["render",f]]);t["default"]=Z},fb6a:function(e,t,n){"use strict";var r=n("23e7"),o=n("da84"),a=n("e8b5"),c=n("68ee"),i=n("861d"),s=n("23cb"),u=n("07fa"),d=n("fc6a"),l=n("8418"),b=n("b622"),f=n("1dde"),g=n("f36a"),m=f("slice"),p=b("species"),v=o.Array,h=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var n,r,o,b=d(this),f=u(b),m=s(e,f),O=s(void 0===t?f:t,f);if(a(b)&&(n=b.constructor,c(n)&&(n===v||a(n.prototype))?n=void 0:i(n)&&(n=n[p],null===n&&(n=void 0)),n===v||void 0===n))return g(b,m,O);for(r=new(void 0===n?v:n)(h(O-m,0)),o=0;m<O;m++,o++)m in b&&l(r,o,b[m]);return r.length=o,r}})}}]);
//# sourceMappingURL=groupedChunk.bf6860e2.js.map